<!DOCTYPE html>
<html lang="en">
	<head>
  		<title>Animal Crossing Birthdays</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width initial-scale=1.0" />
        <link rel="stylesheet" type="text/css" href="css/main.css">
        <link href='https://fonts.googleapis.com/css?family=Dekko' rel='stylesheet'>
        <script src="js/jquery-3.4.1.min.js"></script>
        <script src="js/moment.js"></script>
        <meta name="description" content="Study Animal Crossing Birthdays">
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-142108931-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'UA-142108931-1');
        </script>
    </head>
    <body style="font-family: 'Dekko';">
        <header>
            <h1 class="h1">
                Unofficial Animal Crossing birthday study guide!
            </h1>
        </header>
    	<main>
    	
            <section>
                <h2 id="name" class="h2"></h2>
                <img id="image" class="animalImage" />
                <h3 id="birthday" class="h3"></h3>
                <br/>
                <button OnClick="next()" class="nextButton">Next</button>
                <br/>
                <br/>
                <br/>
                <br/>
                <br/>
                <br/>
                <br/>
            </section>

            <script type="text/javascript">
                var characters = [];
                var curIndex = 0;

                $.getJSON("birthdays.json", function(json) {
                    $.each(json, function () {
                        var obj = this;
                        var imageUrl = "img/"+obj["name"]+".png";

                        var birthday = moment(obj["birthday"], "DD-MM-YYYY").format("MMM Do YYYY");
                        var char = {  
                            name: obj["name"],
                            birthday: birthday,
                            image: imageUrl
                        };
                        characters.push(char);
                    });

                    characters = shuffle(characters);
                    curIndex = 0;
                    load(characters[curIndex]);
                });
                
                function next() {
                    if (curIndex == characters.length - 1) {
                        curIndex = 0;
                        load(characters[curIndex]);
                    }
                    else {
                        load(characters[++curIndex]);
                    }

                }

                /**
                 * Shuffles array in place.
                 * @param {Array} a items An array containing the items.
                 * https://stackoverflow.com/a/6274381/4102299
                 */
                function shuffle(a) {
                    var j, x, i;
                    for (i = a.length - 1; i > 0; i--) {
                        j = Math.floor(Math.random() * (i + 1));
                        x = a[i];
                        a[i] = a[j];
                        a[j] = x;
                    }
                    return a;
                }
 
                function load(obj) {
                    $("#name").text(obj["name"]);
                    $("#image").attr("src", obj["image"]);
                    $("#birthday").text(obj["birthday"]);
                }

            </script>
    	</main>
        <footer>
            <p class="footer"><a href="https://www.copyright.gov/fair-use/">FAIR USE</a>. For Education Purposes Only. Â© 2001 - 2017 Nintendo. Nintendo properties are trademarks of Nintendo. Images and data from <a href="https://animal-crossing.com">http://animal-crossing.com</a>.</p>
        </footer>
    </body>
</html>